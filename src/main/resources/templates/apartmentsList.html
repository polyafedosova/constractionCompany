<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Getting Started: Serving Web Content</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
<div>
  <ul>
    <li th:utext="${building?.city}">..</li>
    <li th:utext="${building?.street}">..</li>
    <li th:utext="${building?.number}">..</li>
    <li th:utext="${building?.name}">..</li>
    <li th:utext="${building?.constraction_start_date}">..</li>
    <li th:utext="${building?.expected_commissioning_date}">..</li>
    <li th:utext="${building?.commissioning_date}">..</li>
  </ul>
</div>
<div>
  <form method="post" th:action="@{/buildings/__${building?.building_id}__/apartments/addApartment}">
    <!--CSRF Token-->
    <input
            type="hidden"
            th:name="${_csrf.parameterName}"
            th:value="${_csrf.token}" />

    <div th:text="${message}">
      {
    </div>
    <input th:value="${apartmentToAdd?.number}" type="text" name="number"
           placeholder="Введите номер квартиры">
    <input th:value="${apartmentToAdd?.floor}" type="text" name="floor"
           placeholder="Введите этаж">
    <input th:value="${apartmentToAdd?.entrance}" type="text" name="entrance"
           placeholder="Введите подъезд">
    <input th:value="${apartmentToAdd?.total_area}" type="text" name="total_area"
           placeholder="Введите общую площадь">
    <input th:value="${apartmentToAdd?.living_area}" type="text" name="living_area"
           placeholder="Введите жилую площадь">
    <input th:value="${apartmentToAdd?.number_rooms}" type="number" min=1 max=5 name="number_rooms"
           placeholder="Введите количество комнат">
    <button type="submit">Добавить</button>
  </form>
</div>
<div>
  <form method="get" th:action="@{/buildings/__${building?.building_id}__/apartments/findApartment}">
    <!--CSRF Token-->
    <input
            type="hidden"
            th:name="${_csrf.parameterName}"
            th:value="${_csrf.token}" />

    <div th:text="${message}">
      {
    </div>
    <select th:if="${not #lists.isEmpty(statuses)}" name="status">
      <option th:each="status : ${statuses}"
              th:value="${status?.ordinal()}"
              th:text="${status?.value}"
              th:selected="${status == currentStatus}">
      </option>
    </select>
    <button type="submit">Найти</button>
  </form>
</div>
<!--<div>
  <a th:href="@{/buildings/__${building.building_id}__/apartments?doneStatus=true}">Сданные квартиры</a>
  <a th:href="@{/buildings/__${building.building_id}__/apartments}">Сбросить фильтр</a>
</div>
-->
<div>Список апартаментов</div>
<ul>
  <th:block th:each="apartment: ${apartments}">
    Номер:<li th:utext="${apartment?.number}">..</li>
    Этаж: <li th:utext="${apartment?.floor}">..</li>
    Подъезд: <li th:utext="${apartment?.entrance}">..</li>
    Общая площадь: <li th:utext="${apartment?.total_area}">..</li>
    Жилая площадь: <li th:utext="${apartment?.living_area}">..</li>
    Количество комнат: <li th:utext="${apartment?.number_rooms}">..</li>
    <div>
      <a th:href="@{/buildings/__${building?.building_id}__/apartments/__${apartment?.apartment_id}__/editApartment}">
        Редактировать квартиру
      </a>
      <a href="/deleteApartment" th:attrprepend="href='apartments/'+${apartment?.apartment_id}">
        Удалить квартиру
      </a>
    </div>
    <p>-----------------------------------------</p>
  </th:block>
</ul>
</body>
</html>