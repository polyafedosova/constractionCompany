<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Getting Started: Serving Web Content</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
<div th:text="${message}">
  {
</div>
<div>
  <form method="post" action="/contracts/addContracts">
    <!--CSRF Token-->
    <input
            type="hidden"
            th:name="${_csrf.parameterName}"
            th:value="${_csrf.token}" />

    <div th:text="${message}">
      {
    </div>
    <input th:value="${contract?.price}" class="input" type="text" name="price"
           placeholder="Введите сумму">
    <input th:value="${contract?.date}" class="input" type="date" name="date"
           placeholder="Введите дату">
    <select th:value="${contract?.status}" name="statusC">
      <option disabled>Выберите статус</option>
      <option value="0">завершен</option>
      <option selected value="1">в процессе</option>
      <option value="2">сорван</option>
    </select>
    <select th:value="${contract?.type}" name="typeC">
      <option disabled>Выберите тип</option>
      <option selected value="0">аренда</option>
      <option value="1">продажа</option>
    </select>
    <input th:value="${contract?.apartment_id}" type="text" name="apartment_id"
           placeholder="Введите id квартиры">
    <input th:value="${contract?.client_id}" type="text" name="client_id"
           placeholder="Введите id клиента">
    <input th:value="${contract?.employee_id}" type="text" name="employee_id"
           placeholder="Введите id сотрудника">
    <button type="submit">Добавить</button>
  </form>
</div>
<div th:unless="${employee?.isEnabled()}">
  <ul>
    Фамилия:<li th:utext="${client?.second_name}">..</li>
    Имя:<li th:utext="${client?.first_name}">..</li>
    Отчество:<li th:utext="${client?.middle_name}">..</li>
    Телефон: <li th:utext="${client?.phone}">..</li>
    Дата рождения: <li th:utext="${client?.birth_date}">..</li>
    Номер и серия паспорта: <li th:utext="${client?.passport}">..</li>
  </ul>
  <!--endif-->
</div>
<div th:if="${employee?.isEnabled()}">
  <ul>
    <p>Личная информация о сотруднике</p>
    Фамилия:<li th:utext="${employee?.second_name}">..</li>
    Имя:<li th:utext="${employee?.first_name}">..</li>
    Отчество:<li th:utext="${employee?.middle_name}">..</li>
    Телефон: <li th:utext="${employee?.phone}">..</li>
    Дата рождения: <li th:utext="${employee?.birth_date}">..</li>
    Номер и серия паспорта: <li th:utext="${employee?.passport}">..</li>
  </ul>
</div>
<div>Контракты</div>
<ul>
  <th:block th:each="contract: ${contracts}">
    Сумма (руб.): <li th:utext="${contract?.price}">..</li>
    Дата: <li th:utext="${contract?.date}">..</li>
    Статус контракта: <li th:utext="${contract?.status}">..</li>
    Тип контракта: <li th:utext="${contract?.type}">..</li>
    <ul>
      <p>Информация о квартире</p>
      Номер: <li th:utext="${contract?.apartment?.number}">..</li>
      Этаж: <li th:utext="${contract?.apartment?.floor}">..</li>
      Подъезд: <li th:utext="${contract?.apartment?.entrance}">..</li>
      Общая площадь: <li th:utext="${contract?.apartment?.total_area}">..</li>
      Жилая площадь: <li th:utext="${contract?.apartment?.living_area}">..</li>
      Количество комнат: <li th:utext="${contract?.apartment?.number_rooms}">..</li>
    </ul>
    <ul th:if="${employee?.isEnabled()}">
      <p>Информация о клиенте</p>
      Фамилия:<li th:utext="${contract?.client?.second_name}">..</li>
      Имя:<li th:utext="${contract?.client?.first_name}">..</li>
      Отчество:<li th:utext="${contract?.client?.middle_name}">..</li>
      Телефон: <li th:utext="${contract?.client?.phone}">..</li>
      Дата рождения: <li th:utext="${contract?.client?.birth_date}">..</li>
      Номер и серия паспорта: <li th:utext="${contract?.client?.passport}">..</li>
    </ul>
    <ul th:unless="${employee?.isEnabled()}">
      <p>Информация о сотруднике, оформившем договор</p>
      Фамилия:<li th:utext="${contract?.employee?.second_name}">..</li>
      Имя:<li th:utext="${contract?.employee?.first_name}">..</li>
      Отчество:<li th:utext="${contract?.employee?.middle_name}">..</li>
      Телефон: <li th:utext="${contract?.employee?.phone}">..</li>
      Дата рождения: <li th:utext="${contract?.employee?.birth_date}">..</li>
      Номер и серия паспорта: <li th:utext="${contract?.employee?.passport}">..</li>
    </ul>
    <a th:href="@{/contracts/__${contract?.contract_id}__/editContract}">Редактировать контракт</a>
    <a th:href="@{/contracts/__${contract?.contract_id}__/deleteContract}">Удалить контракт</a>
    <p>-----------------------------------------</p>
  </th:block>
</ul>
</body>
</html>